<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Football Streams</title>
<style>
  body {
    margin: 0;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: #0a0a0a;
    color: #e0e0e0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  header {
    padding: 15px 30px;
    background: linear-gradient(180deg, #1a1a1a, #121212);
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  header h1 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 600;
    color: #ff8c00;
  }

  .nav-tabs {
    display: flex;
    gap: 15px;
  }

  .nav-tab {
    padding: 8px 16px;
    border-radius: 8px;
    cursor: pointer;
    background: #2a2a2a;
    transition: all 0.3s ease;
    font-weight: 500;
    font-size: 0.95rem;
  }

  .nav-tab:hover {
    background: #3a3a2a;
    transform: translateY(-1px);
  }

  .nav-tab.active {
    background: #ff8c00;
    color: #fff;
  }

  #statusBar {
    padding: 10px 30px;
    background: #151515;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.9rem;
    border-bottom: 1px solid #252525;
  }

  #statusBar .warning {
    color: #ffcc00;
    font-weight: 500;
  }

  #statusBar .status-loading { color: #00ccff; }
  #statusBar .status-active { color: #00ff00; }
  #statusBar .status-frozen { color: #ff4444; }
  #statusBar .status-not-playing { color: #ffcc00; }

  #timer {
    font-weight: 600;
    font-size: 1rem;
    color: #e0e0e0;
  }

  .page {
    display: none;
    flex: 1;
    overflow-y: auto;
    animation: fadeIn 0.3s ease;
  }

  .page.active {
    display: flex;
    flex-direction: column;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  #schedule.active, #streams.active {
    padding: 20px 30px;
  }

  #match.active {
    padding: 0;
    height: 100vh;
  }

  #playerContainer {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    flex: 1;
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
    position: absolute;
    top: 0;
    left: 0;
  }

  .schedule-grid {
    display: grid;
    gap: 20px;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    padding: 20px 0;
  }

  .schedule-item {
    background: linear-gradient(135deg, #1f1f1f, #2a2a2a);
    padding: 20px;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid #3a3a3a;
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  .schedule-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
  }

  .match-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 15px;
  }

  .team-logo {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #ff4d4d; /* Placeholder for home team */
  }

  .team-logo.away {
    background: #4d4dff; /* Placeholder for away team */
  }

  .match-details h3 {
    margin: 0;
    font-size: 1.3rem;
    color: #ff8c00;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .match-details p {
    margin: 5px 0;
    font-size: 0.9rem;
    color: #b0b0b0;
  }

  .match-status {
    font-size: 0.9rem;
    font-weight: 600;
    padding: 4px 10px;
    border-radius: 8px;
    background: #00ff00;
    color: #0a0a0a;
    text-align: center;
    margin-top: 10px;
  }

  .match-status.upcoming { background: #ffcc00; }
  .match-status.finished { background: #ff4444; }

  .details-btn {
    margin-top: 10px;
    padding: 8px 16px;
    background: #ff8c00;
    border: none;
    border-radius: 6px;
    color: #fff;
    cursor: pointer;
    transition: background 0.3s ease;
  }

  .details-btn:hover {
    background: #e07b00;
  }

  #scheduleControls {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }

  .control-btn {
    padding: 8px 16px;
    background: #2a2a2a;
    border: none;
    border-radius: 6px;
    color: #e0e0e0;
    cursor: pointer;
    transition: background 0.3s ease;
  }

  .control-btn:hover {
    background: #3a3a2a;
  }

  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 2000;
    justify-content: center;
    align-items: center;
  }

  .modal-content {
    background: #1f1f1f;
    padding: 20px;
    border-radius: 12px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  }

  .modal-close {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #ff4444;
    border: none;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    color: #fff;
    cursor: pointer;
    font-size: 1.2rem;
  }

  .modal-close:hover {
    background: #cc0000;
  }

  #loadingSpinner {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border: 8px solid #2a2a2a;
    border-top: 8px solid #ff8c00;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
  }

  #adminPanel {
    position: fixed;
    bottom: 0;
    width: 100%;
    background: linear-gradient(180deg, #1a1a1a, #0a0a0a);
    padding: 15px;
    border-top: 1px solid #2a2a2a;
    box-shadow: 0 -2px 6px rgba(0, 0, 0, 0.4);
    z-index: 1000;
    transition: all 0.3s ease;
  }

  #adminPanel.collapsed {
    height: 50px;
    overflow: hidden;
  }

  #adminPanel.expanded {
    height: auto;
  }

  #adminToggle {
    background: #ff8c00;
    border: none;
    padding: 8px 16px;
    color: #fff;
    font-size: 1rem;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s ease;
  }

  #adminToggle:hover {
    background: #e07b00;
  }

  #adminContent.locked .admin-form {
    display: none;
  }

  #adminPassword {
    padding: 8px;
    font-size: 0.9rem;
    border: 1px solid #2a2a2a;
    background: #0a0a0a;
    color: #e0e0e0;
    border-radius: 4px;
    width: 180px;
  }

  .admin-form {
    display: flex;
    gap: 12px;
    margin-top: 10px;
    flex-wrap: wrap;
  }

  .admin-input, .admin-datetime {
    padding: 8px;
    font-size: 0.9rem;
    border: 1px solid #2a2a2a;
    background: #0a0a0a;
    color: #e0e0e0;
    border-radius: 4px;
    flex: 1;
    min-width: 150px;
  }

  .admin-select {
    padding: 8px;
    font-size: 0.9rem;
    border: 1px solid #2a2a2a;
    background: #0a0a0a;
    color: #e0e0e0;
    border-radius: 4px;
    min-width: 200px;
  }

  .admin-button {
    padding: 8px 16px;
    font-size: 0.9rem;
    background: #ff8c00;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    color: #fff;
    transition: background 0.3s ease;
    min-width: 100px;
  }

  .admin-button:hover {
    background: #e07b00;
  }

  #adminStatus {
    font-size: 0.9rem;
    color: #b0b0b0;
    margin-top: 10px;
  }

  #adminMessage {
    font-size: 0.9rem;
    color: #00ff00;
    margin-top: 5px;
    display: none;
  }
</style>
</head>
<body>

<header>
  <h1>Football Live</h1>
  <div class="nav-tabs" id="navTabs">
    <div class="nav-tab active" data-page="schedule">Schedule</div>
    <div class="nav-tab" data-page="streams">Streams</div>
    <div class="nav-tab" data-page="match">Match</div>
  </div>
</header>

<div id="statusBar">
  <div class="warning" id="streamStatus">‚ö†Ô∏è Stream may experience interruptions</div>
  <div id="timer">Match Timer: 00:00</div>
</div>

<div id="schedule" class="page active">
  <div id="scheduleControls">
    <button class="control-btn" onclick="sortByTime()">Sort by Time</button>
    <button class="control-btn" onclick="filterByStatus('upcoming')">Show Upcoming</button>
    <button class="control-btn" onclick="filterByStatus('live')">Show Live</button>
    <button class="control-btn" onclick="filterByStatus('finished')">Show Finished</button>
  </div>
  <div id="loadingSpinner"></div>
  <div class="schedule-grid" id="scheduleGrid"></div>
</div>

<div id="streams" class="page">
  <h2 id="streamMatchTitle" style="font-size: 1.8rem; font-weight: 600; color: #ff8c00;"></h2>
  <div class="stream-list" id="streamList"></div>
</div>

<div id="match" class="page">
  <div id="playerContainer">
    <iframe id="playerFrame" src="" allowfullscreen allow="encrypted-media; picture-in-picture;"></iframe>
  </div>
</div>

<div id="modal" class="modal">
  <div class="modal-content">
    <button class="modal-close">&times;</button>
    <h3 id="modalTitle"></h3>
    <p id="modalTime"></p>
    <ul id="modalStreams"></ul>
  </div>
</div>

<div id="adminPanel" class="collapsed">
  <button id="adminToggle">Toggle Admin Panel</button>
  <div id="adminContent" class="locked">
    <input type="password" id="adminPassword" placeholder="Enter password">
    <div id="adminStatus">Status: Locked üîí</div>
    <div class="admin-form">
      <input type="text" id="adminTitle" class="admin-input" placeholder="Game Title">
      <input type="text" id="adminStreams" class="admin-input" placeholder="Stream Links (comma-separated)">
      <input type="datetime-local" id="adminTime" class="admin-datetime" value="">
      <button class="admin-button" onclick="addGame()">Add Game</button>
    </div>
    <div class="admin-form">
      <select id="adminEdit" class="admin-select">
        <option value="">Select Game to Edit</option>
      </select>
      <button class="admin-button" onclick="editGame()">Edit Game</button>
      <select id="adminRemove" class="admin-select">
        <option value="">Select Game to Remove</option>
      </select>
      <button class="admin-button" onclick="removeGame()">Remove Game</button>
    </div>
    <div class="admin-form">
      <button class="admin-button" onclick="resetGames()">Reset Games</button>
    </div>
    <div id="adminMessage"></div>
  </div>
</div>

<script>
let matches = JSON.parse(localStorage.getItem('matches')) || [
  {
    name: "Wolves VS Man City",
    streams: [
      "https://embedsports.top/embed/echo/wolves-vs-manchester-city-football-1378975/1",
      "https://embedsports.top/embed/echo/wolves-vs-manchester-city-football-1378975/2",
      "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/1"
    ],
    startTime: new Date("2025-08-16T17:30:00")
  },
  {
    name: "Monaco VS Le Havre AC",
    streams: [
      "https://embedsports.top/embed/echo/as-monaco-vs-le-havre-ac/1",
      "https://embedsports.top/embed/alpha/as-monaco-vs-le-havre-ac/1"
    ],
    startTime: new Date("2025-08-16T18:00:00")
  },
  {
    name: "Rangers VS Alloa Athletic",
    streams: [
      "https://embedsports.top/embed/echo/rangers-vs-alloa-athletic-football-1421767/1",
      "https://embedsports.top/embed/alpha/rangers-vs-alloa-athletic/1"
    ],
    startTime: new Date("2025-08-16T17:45:00")
  },
  {
    name: "Mallorca VS Barcelona",
    streams: [
      "https://embedsports.top/embed/alpha/mallorca-vs-barcelona/1",
      "https://embedsports.top/embed/alpha/mallorca-vs-barcelona/2"
    ],
    startTime: new Date("2025-08-16T18:30:00")
  },
  {
    name: "Stuttgart vs Bayern Munich",
    streams: [
      "https://embedsports.top/embed/alpha/germany-super-cup-vfb-stuttgart-vs-bayern-munich/1",
      "https://embedsports.top/embed/alpha/stuttgart-vs-bayern-munich/2"
    ],
    startTime: new Date("2025-08-17T12:00:00")
  },
  {
    name: "Inter Milan vs Olympiacos",
    streams: [
      "https://embedsports.top/embed/alpha/inter-milan-vs-olympiacos/1",
      "https://embedsports.top/embed/alpha/inter-milan-vs-olympiacos/2"
    ],
    startTime: new Date("2025-08-17T14:00:00")
  }
];

// Convert startTime to Date objects when loading from localStorage
matches = matches.map(match => ({
  ...match,
  startTime: new Date(match.startTime)
}));

// Sort matches by start time
matches.sort((a, b) => a.startTime - b.startTime);

let currentMatchIndex = 0;
let currentStreamIndex = 0;
let currentPage = 'schedule';
let timerInterval = null;
let streamLoadTimeout = null;
let streamCheckInterval = null;
let isStreamPlaying = false;

const navTabs = document.getElementById('navTabs');
const scheduleGrid = document.getElementById('scheduleGrid');
const streamMatchTitle = document.getElementById('streamMatchTitle');
const streamList = document.getElementById('streamList');
const playerFrame = document.getElementById('playerFrame');
const streamStatus = document.getElementById('streamStatus');
const timerEl = document.getElementById('timer');
const adminPanel = document.getElementById('adminPanel');
const adminToggle = document.getElementById('adminToggle');
const adminContent = document.getElementById('adminContent');
const adminPassword = document.getElementById('adminPassword');
const adminStatus = document.getElementById('adminStatus');
const adminTitle = document.getElementById('adminTitle');
const adminStreams = document.getElementById('adminStreams');
const adminTime = document.getElementById('adminTime');
const adminEdit = document.getElementById('adminEdit');
const adminRemove = document.getElementById('adminRemove');
const adminMessage = document.getElementById('adminMessage');
const modal = document.getElementById('modal');
const modalClose = document.querySelector('.modal-close');
const modalTitle = document.getElementById('modalTitle');
const modalTime = document.getElementById('modalTime');
const modalStreams = document.getElementById('modalStreams');
const loadingSpinner = document.getElementById('loadingSpinner');

// Page navigation
navTabs.querySelectorAll('.nav-tab').forEach(tab => {
  tab.addEventListener('click', () => {
    currentPage = tab.dataset.page;
    updatePage();
  });
});

function updatePage() {
  document.querySelectorAll('.page').forEach(page => {
    page.classList.toggle('active', page.id === currentPage);
  });
  document.querySelectorAll('.nav-tab').forEach(tab => {
    tab.classList.toggle('active', tab.dataset.page === currentPage);
  });

  if (currentPage === 'schedule') {
    renderSchedule();
    if (timerInterval) clearInterval(timerInterval);
    if (streamCheckInterval) clearInterval(streamCheckInterval);
    if (streamLoadTimeout) clearTimeout(streamLoadTimeout);
    streamStatus.textContent = '‚ö†Ô∏è Stream may experience interruptions';
    streamStatus.className = 'warning';
    isStreamPlaying = false;
  } else if (currentPage === 'streams') {
    renderStreams();
    if (timerInterval) clearInterval(timerInterval);
    if (streamCheckInterval) clearInterval(streamCheckInterval);
    if (streamLoadTimeout) clearTimeout(streamLoadTimeout);
    streamStatus.textContent = '‚ö†Ô∏è Stream may experience interruptions';
    streamStatus.className = 'warning';
    isStreamPlaying = false;
  } else if (currentPage === 'match') {
    loadStream();
    startMatchTimer();
    startStreamCheck();
  }
}

// Render schedule page with enhanced features
function renderSchedule() {
  loadingSpinner.style.display = 'block';
  scheduleGrid.innerHTML = '';
  const now = new Date();
  const fourHoursInMs = 4 * 60 * 60 * 1000;

  setTimeout(() => {
    scheduleGrid.innerHTML = '';
    matches.forEach((match, index) => {
      const matchEndTime = new Date(match.startTime.getTime() + 110 * 60 * 1000);
      if (now - matchEndTime <= fourHoursInMs) {
        const elapsed = Math.floor((now - match.startTime) / 1000);
        let status = 'finished';
        let timeText = 'Finished';
        if (elapsed < 0) {
          status = 'upcoming';
          timeText = `Starts in ${formatTime(Math.abs(elapsed))}`;
        } else if (elapsed < 110 * 60) {
          status = 'live';
          timeText = `Live for ${formatTime(elapsed)}`;
        }

        const item = document.createElement('div');
        item.className = 'schedule-item';
        item.innerHTML = `
          <div class="match-header">
            <div class="team-logo"></div>
            <div class="match-details">
              <h3>${match.name}</h3>
              <p>Status: <span class="match-status ${status}">${status.charAt(0).toUpperCase() + status.slice(1)}</span></p>
              <p>Time: ${timeText}</p>
            </div>
            <div class="team-logo away"></div>
          </div>
          <button class="details-btn" onclick="showDetails(${index})">Details</button>
        `;
        item.onclick = () => {
          currentMatchIndex = index;
          currentStreamIndex = 0;
          currentPage = 'streams';
          updatePage();
        };
        scheduleGrid.appendChild(item);
      }
    });
    loadingSpinner.style.display = 'none';
  }, 500); // Simulate loading delay
}

function showDetails(index) {
  const match = matches[index];
  modalTitle.textContent = match.name;
  modalTime.textContent = `Start Time: ${match.startTime.toLocaleString('en-US', {
    weekday: 'short',
    month: 'short',
    day: 'numeric',
    hour: 'numeric',
    minute: '2-digit',
    hour12: true
  })}`;
  modalStreams.innerHTML = match.streams.map(stream => `<li>${stream}</li>`).join('');
  modal.style.display = 'flex';
}

modalClose.addEventListener('click', () => {
  modal.style.display = 'none';
});

window.addEventListener('click', (e) => {
  if (e.target === modal) modal.style.display = 'none';
});

function sortByTime() {
  matches.sort((a, b) => a.startTime - b.startTime);
  renderSchedule();
}

function filterByStatus(status) {
  const now = new Date();
  const fourHoursInMs = 4 * 60 * 60 * 1000;
  loadingSpinner.style.display = 'block';
  setTimeout(() => {
    scheduleGrid.innerHTML = '';
    matches.forEach((match, index) => {
      const matchEndTime = new Date(match.startTime.getTime() + 110 * 60 * 1000);
      if (now - matchEndTime <= fourHoursInMs) {
        const elapsed = Math.floor((now - match.startTime) / 1000);
        let matchStatus = 'finished';
        if (elapsed < 0) matchStatus = 'upcoming';
        else if (elapsed < 110 * 60) matchStatus = 'live';
        if (status === 'all' || matchStatus === status) {
          const item = document.createElement('div');
          item.className = 'schedule-item';
          item.innerHTML = `
            <div class="match-header">
              <div class="team-logo"></div>
              <div class="match-details">
                <h3>${match.name}</h3>
                <p>Status: <span class="match-status ${matchStatus}">${matchStatus.charAt(0).toUpperCase() + matchStatus.slice(1)}</span></p>
                <p>Time: ${elapsed < 0 ? `Starts in ${formatTime(Math.abs(elapsed))}` : `Live for ${formatTime(elapsed)}`}</p>
              </div>
              <div class="team-logo away"></div>
            </div>
            <button class="details-btn" onclick="showDetails(${index})">Details</button>
          `;
          item.onclick = () => {
            currentMatchIndex = index;
            currentStreamIndex = 0;
            currentPage = 'streams';
            updatePage();
          };
          scheduleGrid.appendChild(item);
        }
      }
    });
    loadingSpinner.style.display = 'none';
  }, 500);
}

// Render streams page
function renderStreams() {
  streamMatchTitle.textContent = matches[currentMatchIndex].name;
  streamList.innerHTML = '';
  matches[currentMatchIndex].streams.forEach((stream, index) => {
    const item = document.createElement('div');
    item.className = 'stream-item';
    item.textContent = `Stream ${index + 1}`;
    item.onclick = () => {
      currentStreamIndex = index;
      currentPage = 'match';
      updatePage();
    };
    streamList.appendChild(item);
  });
}

// Load stream and monitor load status
function loadStream() {
  const match = matches[currentMatchIndex];
  if (currentStreamIndex >= match.streams.length) {
    streamStatus.textContent = 'No more streams available';
    streamStatus.className = 'status-frozen';
    return;
  }

  playerFrame.src = match.streams[currentStreamIndex];
  streamStatus.textContent = 'Loading stream...';
  streamStatus.className = 'status-loading';
  isStreamPlaying = false;

  if (streamLoadTimeout) clearTimeout(streamLoadTimeout);
  streamLoadTimeout = setTimeout(() => {
    if (!isStreamPlaying) {
      streamStatus.textContent = 'Stream failed to load, trying another link';
      streamStatus.className = 'status-frozen';
      currentStreamIndex = (currentStreamIndex + 1) % match.streams.length;
      loadStream();
    }
  }, 5000);

  playerFrame.onload = () => {
    isStreamPlaying = true;
    streamStatus.textContent = 'Stream active';
    streamStatus.className = 'status-active';
    if (streamLoadTimeout) clearTimeout(streamLoadTimeout);
  };

  playerFrame.onerror = () => {
    isStreamPlaying = false;
    streamStatus.textContent = 'Stream failed to load, trying another link';
    streamStatus.className = 'status-frozen';
    currentStreamIndex = (currentStreamIndex + 1) % match.streams.length;
    loadStream();
  };
}

// Check for stream playback status
function startStreamCheck() {
  if (streamCheckInterval) clearInterval(streamCheckInterval);

  streamCheckInterval = setInterval(() => {
    if (currentPage !== 'match') return;
    if (isStreamPlaying) {
      streamStatus.textContent = 'Stream active';
      streamStatus.className = 'status-active';
    } else {
      streamStatus.textContent = 'Stream not playing';
      streamStatus.className = 'status-not-playing';
    }
  }, 2000);
}

// MATCH TIMER LOGIC
function startMatchTimer() {
  if (timerInterval) clearInterval(timerInterval);

  const match = matches[currentMatchIndex];
  const startTime = new Date(match.startTime);
  const now = new Date();

  timerInterval = setInterval(() => {
    const currentTime = new Date();
    let elapsed = Math.floor((currentTime - startTime) / 1000);

    let displayText = "";
    if (elapsed < 0) {
      displayText = `Match Starts In: ${formatTime(Math.abs(elapsed))}`;
    } else if (elapsed < 45 * 60) {
      displayText = `Match Timer: ${formatTime(elapsed)} (1st Half)`;
    } else if (elapsed < 50 * 60) {
      displayText = `Match Timer: ${formatTime(elapsed - 45 * 60)} (1st Half Added Time)`;
    } else if (elapsed < 60 * 60) {
      displayText = `Halftime: ${formatTime(elapsed - 50 * 60)}`;
    } else if (elapsed < 105 * 60) {
      displayText = `Match Timer: ${formatTime(elapsed - 60 * 60 + 45 * 60)} (2nd Half)`;
    } else if (elapsed < 110 * 60) {
      displayText = `Match Timer: ${formatTime(elapsed - 105 * 60)} (2nd Half Added Time)`;
    } else {
      displayText = "Full Time";
      clearInterval(timerInterval);
    }

    timerEl.textContent = displayText;
  }, 1000);
}

function formatTime(seconds) {
  const m = Math.floor(seconds / 60);
  const s = seconds % 60;
  return `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
}

// Admin Panel Functions
adminToggle.addEventListener('click', () => {
  adminPanel.classList.toggle('collapsed');
  adminPanel.classList.toggle('expanded');
  if (adminPanel.classList.contains('expanded')) {
    adminToggle.textContent = 'Collapse Admin Panel';
  } else {
    adminToggle.textContent = 'Toggle Admin Panel';
  }
});

adminPassword.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') {
    if (adminPassword.value === 'admin123') {
      adminContent.classList.remove('locked');
      adminStatus.textContent = 'Status: Unlocked üîì';
      adminPassword.style.display = 'none';
      updateDropdowns();
    } else {
      adminStatus.textContent = 'Status: Locked üîí (Wrong Password)';
    }
  }
});

function addGame() {
  const title = adminTitle.value.trim();
  const streamsInput = adminStreams.value.trim();
  const time = adminTime.value ? new Date(adminTime.value) : new Date();
  if (title && streamsInput) {
    const streams = streamsInput.split(',').map(s => s.trim()).filter(s => s);
    matches.push({ name: title, streams: streams, startTime: time });
    adminTitle.value = '';
    adminStreams.value = '';
    adminTime.value = '';
    saveMatches();
    renderSchedule();
    showMessage('Game added successfully!');
  } else {
    showMessage('Please fill all fields!', true);
  }
}

function editGame() {
  const index = adminEdit.value;
  if (index) {
    const title = adminTitle.value.trim() || matches[index].name;
    const streamsInput = adminStreams.value.trim() || matches[index].streams.join(', ');
    const time = adminTime.value ? new Date(adminTime.value) : matches[index].startTime;
    if (title && streamsInput) {
      const streams = streamsInput.split(',').map(s => s.trim()).filter(s => s);
      matches[index] = { name: title, streams: streams, startTime: time };
      adminTitle.value = '';
      adminStreams.value = '';
      adminTime.value = '';
      saveMatches();
      renderSchedule();
      updateDropdowns();
      showMessage('Game updated successfully!');
    } else {
      showMessage('Please fill all fields!', true);
    }
  }
}

function removeGame() {
  const index = adminRemove.value;
  if (index) {
    matches.splice(index, 1);
    saveMatches();
    updateDropdowns();
    renderSchedule();
    showMessage('Game removed successfully!');
  }
}

function resetGames() {
  if (confirm('Are you sure you want to reset all games? This will clear saved data.')) {
    localStorage.removeItem('matches');
    matches = [...JSON.parse(localStorage.getItem('matches')) || [
      {
        name: "Wolves VS Man City",
        streams: [
          "https://embedsports.top/embed/echo/wolves-vs-manchester-city-football-1378975/1",
          "https://embedsports.top/embed/echo/wolves-vs-manchester-city-football-1378975/2",
          "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/1"
        ],
        startTime: new Date("2025-08-16T17:30:00")
      },
      {
        name: "Monaco VS Le Havre AC",
        streams: [
          "https://embedsports.top/embed/echo/as-monaco-vs-le-havre-ac/1",
          "https://embedsports.top/embed/alpha/as-monaco-vs-le-havre-ac/1"
        ],
        startTime: new Date("2025-08-16T18:00:00")
      },
      {
        name: "Rangers VS Alloa Athletic",
        streams: [
          "https://embedsports.top/embed/echo/rangers-vs-alloa-athletic-football-1421767/1",
          "https://embedsports.top/embed/alpha/rangers-vs-alloa-athletic/1"
        ],
        startTime: new Date("2025-08-16T17:45:00")
      },
      {
        name: "Mallorca VS Barcelona",
        streams: [
          "https://embedsports.top/embed/alpha/mallorca-vs-barcelona/1",
          "https://embedsports.top/embed/alpha/mallorca-vs-barcelona/2"
        ],
        startTime: new Date("2025-08-16T18:30:00")
      },
      {
        name: "Stuttgart vs Bayern Munich",
        streams: [
          "https://embedsports.top/embed/alpha/germany-super-cup-vfb-stuttgart-vs-bayern-munich/1",
          "https://embedsports.top/embed/alpha/stuttgart-vs-bayern-munich/2"
        ],
        startTime: new Date("2025-08-17T12:00:00")
      },
      {
        name: "Inter Milan vs Olympiacos",
        streams: [
          "https://embedsports.top/embed/alpha/inter-milan-vs-olympiacos/1",
          "https://embedsports.top/embed/alpha/inter-milan-vs-olympiacos/2"
        ],
        startTime: new Date("2025-08-17T14:00:00")
      }
    ]].map(match => ({ ...match, startTime: new Date(match.startTime) }));
    saveMatches();
    renderSchedule();
    updateDropdowns();
    showMessage('Games reset successfully!');
  }
}

function updateDropdowns() {
  [adminEdit, adminRemove].forEach(select => {
    select.innerHTML = '<option value="">Select Game</option>';
    matches.forEach((match, index) => {
      const option = document.createElement('option');
      option.value = index;
      option.textContent = match.name;
      select.appendChild(option);
    });
  });
}

function saveMatches() {
  localStorage.setItem('matches', JSON.stringify(matches));
}

function showMessage(text, isError = false) {
  adminMessage.textContent = text;
  adminMessage.style.color = isError ? '#ff4444' : '#00ff00';
  adminMessage.style.display = 'block';
  setTimeout(() => {
    adminMessage.style.display = 'none';
  }, 3000);
}

// Initialize
adminTime.value = new Date().toISOString().slice(0, 16);
renderSchedule();
updatePage();

// Auto-refresh schedule
setInterval(renderSchedule, 60000);
</script>

</body>
</html>
