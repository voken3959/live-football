<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultra Stream Dashboard with Timer</title>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: #121212;
    color: #fff;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }

  header {
    padding: 10px 20px;
    background: #1f1f1f;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
  }

  header h1 { margin: 0; font-size: 1.3rem; }

  .tabs {
    display: flex;
    gap: 10px;
  }

  .tab {
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    background: #2a2a2a;
    transition: background 0.3s;
  }

  .tab.active { background: #ff6600; }

  select {
    padding: 5px 10px;
    font-size: 1rem;
    border-radius: 5px;
    border: none;
    background: #2a2a2a;
    color: #fff;
  }

  #statusBar {
    padding: 5px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #1a1a1a;
    font-size: 0.9rem;
  }

  #statusBar .warning { color: #ffcc00; }

  #playerContainer {
    flex: 1;
    position: relative;
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
  }

  #timer {
    font-weight: bold;
    font-size: 1.1rem;
  }
</style>
</head>
<body>

<header>
  <h1>Ultra Stream Dashboard</h1>
  <div class="tabs" id="matchTabs"></div>
  <select id="streamSelect"></select>
</header>

<div id="statusBar">
  <div class="warning" id="warning">⚠️ This stream may experience issues</div>
  <div id="timer">Match Timer: 00:00</div>
</div>

<div id="playerContainer">
  <iframe id="playerFrame" src="" allowfullscreen allow="encrypted-media; picture-in-picture;"></iframe>
</div>
  
<script>
const matches = [
  {
    name: "Wolves VS Man City",
    streams: [
      "https://embedsports.top/embed/echo/wolves-vs-manchester-city-football-1378975/1",
      "https://embedsports.top/embed/echo/wolves-vs-manchester-city-football-1378975/2",
      "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/1",
      "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/2",
      "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/3",
      "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/4",
     "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/5",
     "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/6",
     "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/7"
    ],
    startTime: "2025-08-16T17:30:00"
  },
  {
    name: "Como VS Sudtirol",
    streams: [
      "https://embedsports.top/embed/echo/como-vs-sudtirol-football-1393803/1",
      "https://embedsports.top/embed/echo/como-vs-sudtirol-football-1393803/2",
      "https://embedsports.top/embed/echo/como-vs-sudtirol-football-1393803/3"
    ],
    startTime: "2025-08-16T17:30:00"
  },
  {
    name: "Rangers VS Alloa Athletic",
    streams: [
      "https://embedsports.top/embed/echo/rangers-vs-alloa-athletic-football-1421767/1",
      "https://embedsports.top/embed/alpha/rangers-vs-alloa-athletic/1",
      "https://embedsports.top/embed/alpha/rangers-vs-alloa-athletic/2",
      "https://embedsports.top/embed/alpha/rangers-vs-alloa-athletic/3"
    ],
    startTime: "2025-08-16T17:45:00"
  }
];

let currentMatchIndex = 0;
let timerInterval;

const streamSelect = document.getElementById("streamSelect");
const playerFrame = document.getElementById("playerFrame");
const warning = document.getElementById("warning");
const timerDisplay = document.getElementById("timer");
const matchTabs = document.getElementById("matchTabs");

function updateStreams() {
  const match = matches[currentMatchIndex];
  streamSelect.innerHTML = "";
  match.streams.forEach((stream, i) => {
    const option = document.createElement("option");
    option.value = stream;
    option.textContent = `Stream ${i+1}`;
    streamSelect.appendChild(option);
  });
  loadStream(match.streams[0], true);
}

function loadStream(url, firstStream = false) {
  playerFrame.src = url;
  warning.style.display = firstStream ? 'block' : 'none';
}

streamSelect.addEventListener("change", () => {
  const match = matches[currentMatchIndex];
  const firstStream = streamSelect.value === match.streams[0];
  loadStream(streamSelect.value, firstStream);
});

function setupTabs() {
  matchTabs.innerHTML = "";
  matches.forEach((match, index) => {
    const tab = document.createElement("div");
    tab.className = "tab" + (index === 0 ? " active" : "");
    tab.textContent = match.name;
    tab.addEventListener("click", () => switchMatch(index));
    matchTabs.appendChild(tab);
  });
}

function switchMatch(index) {
  currentMatchIndex = index;
  document.querySelectorAll('.tab').forEach((t, i) => {
    t.classList.toggle('active', i === index);
  });
  updateStreams();
  clearInterval(timerInterval);
  startMatchTimer();
}

// MATCH TIMER LOGIC
function startMatchTimer() {
  const match = matches[currentMatchIndex];
  const startTime = new Date(match.startTime);
  const now = new Date();

  timerInterval = setInterval(() => {
    const currentTime = new Date();
    let elapsed = Math.floor((currentTime - startTime) / 1000); // seconds

    if (elapsed < 0) elapsed = 0; // countdown until match starts
    let displayText = "";

    // Game phases
    if (elapsed < 45 * 60) {
      displayText = `Match Timer: ${formatTime(elapsed)} (1st Half)`;
    } else if (elapsed < 45 * 60 + 5 * 60) {
      displayText = `Match Timer: ${formatTime(elapsed - 45*60)} (1st Half Added Time)`;
    } else if (elapsed < 60 * 60) {
      displayText = `Halftime Break: ${formatTime(elapsed - 50*60)}`;
    } else if (elapsed < 105 * 60) {
      displayText = `Match Timer: ${formatTime(elapsed - 60*60 + 45*60)} (2nd Half)`;
    } else if (elapsed < 110 * 60) {
      displayText = `Match Timer: ${formatTime(elapsed - 105*60)} (2nd Half Added Time)`;
    } else {
      displayText = "Full Time";
      clearInterval(timerInterval);
    }

    timerDisplay.textContent = displayText;
  }, 1000);
}

function formatTime(seconds) {
  const m = Math.floor(seconds / 60);
  const s = seconds % 60;
  return `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
}

// Initialize
setupTabs();
updateStreams();
startMatchTimer();
</script>

</body>
</html>
