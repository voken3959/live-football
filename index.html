<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Match Streams</title>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: #121212;
    color: #fff;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }

  header {
    padding: 10px 20px;
    background: #1f1f1f;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  header h1 { margin: 0; font-size: 1.2rem; }

  select {
    padding: 5px 10px;
    font-size: 1rem;
    border-radius: 5px;
    border: none;
    background: #2a2a2a;
    color: #fff;
  }

  #statusBar {
    padding: 5px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #1a1a1a;
    font-size: 0.9rem;
  }

  #statusBar .warning { color: #ffcc00; }
  #statusBar .latency { font-weight: bold; }

  #playerContainer {
    flex: 1;
    position: relative;
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
  }

  #connectionIndicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    margin-left: 10px;
    display: inline-block;
  }
</style>
</head>
<body>

<header>
  <h1>Match Stream Dashboard</h1>
  <select id="streamSelect"></select>
</header>

<div id="statusBar">
  <div class="warning" id="warning">⚠️ This stream may experience issues</div>
  <div class="latency" id="latency">Latency: 0s <span id="connectionIndicator"></span></div>
</div>

<div id="playerContainer">
  <iframe id="playerFrame" src="" allowfullscreen allow="encrypted-media; picture-in-picture;"></iframe>
</div>


<script>
const matches = [
  {
    name: "Wolves VS Man City",
    streams: [
      "https://embedsports.top/embed/echo/wolves-vs-manchester-city-football-1378975/1",
      "https://embedsports.top/embed/echo/wolves-vs-manchester-city-football-1378975/2",
      "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/1",
      "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/2",
      "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/3",
      "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/4",
     "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/5",
     "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/6",
     "https://embedsports.top/embed/alpha/wolverhampton-wanderers-vs-manchester-city/7"
    ]
  },
  {
    name: "Lens VS Lyon",
    streams: [
      "https://embedsports.top/embed/admin/lens-vs-lyon/1",
      "https://embedsports.top/embed/alpha/lens-vs-lyon/1",
      "https://embedsports.top/embed/alpha/lens-vs-lyon/2"
    ]
  },
  {
    name: "Rangers VS Alloa Athletic",
    streams: [
      "https://embedsports.top/embed/echo/rangers-vs-alloa-athletic-football-1421767/1",
      "https://embedsports.top/embed/alpha/rangers-vs-alloa-athletic/1",
      "https://embedsports.top/embed/alpha/rangers-vs-alloa-athletic/2",
      "https://embedsports.top/embed/alpha/rangers-vs-alloa-athletic/3"
    ]
  }
];

let currentMatchIndex = 0;
const streamSelect = document.getElementById("streamSelect");
const playerFrame = document.getElementById("playerFrame");
const warning = document.getElementById("warning");
const latencyDisplay = document.getElementById("latency");
const connectionIndicator = document.getElementById("connectionIndicator");
let latency = 0;
let latencyInterval;

function startLatencyTimer() {
  clearInterval(latencyInterval);
  latency = 0;
  latencyDisplay.textContent = `Latency: ${latency}s `;
  latencyDisplay.appendChild(connectionIndicator);

  latencyInterval = setInterval(() => {
    latency++;
    latencyDisplay.textContent = `Latency: ${latency}s `;
    latencyDisplay.appendChild(connectionIndicator);
    // Simulate connection quality
    if(latency < 5) connectionIndicator.style.background = 'green';
    else if(latency < 10) connectionIndicator.style.background = 'yellow';
    else connectionIndicator.style.background = 'red';
  }, 1000);
}

function updateStreams() {
  const match = matches[currentMatchIndex];
  streamSelect.innerHTML = "";
  match.streams.forEach((stream, i) => {
    const option = document.createElement("option");
    option.value = stream;
    option.textContent = `Stream ${i+1}`;
    streamSelect.appendChild(option);
  });

  playerFrame.src = match.streams[0];
  warning.style.display = 'block';
  startLatencyTimer();
}

streamSelect.addEventListener("change", () => {
  const match = matches[currentMatchIndex];
  playerFrame.src = streamSelect.value;
  warning.style.display = streamSelect.value === match.streams[0] ? 'block' : 'none';
  startLatencyTimer();
});

updateStreams();
</script>

</body>
</html>
